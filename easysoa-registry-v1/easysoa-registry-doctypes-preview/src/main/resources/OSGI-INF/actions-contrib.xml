<?xml version="1.0"?>
<component name="org.easysoa.core.preview.contrib.actions">
  <extension target="org.nuxeo.ecm.platform.actions.ActionService"
             point="actions">

    <action id="showFancyBoxPreview" delete="true" />

    <action id="showFancyBoxPreview" order="50" type="fancybox"
            label="label.document.preview" icon="/icons/contextual_menu/preview.png">
      <category>DOCUMENT_UPPER_ACTION</category>
      <filter-id>view_preview</filter-id>
      <filter-id>not_anonymous</filter-id>
      <properties>
        <property name="iframe">
          #{previewActions.getCurrentDocumentPreviewPopupURL()}
        </property>
      </properties>
    </action>

  </extension>
</component>