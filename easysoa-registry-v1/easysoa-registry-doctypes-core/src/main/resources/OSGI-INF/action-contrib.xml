<?xml version="1.0" ?>
<component name="org.easysoa.registry.core.doctypes.action.contrib">

  <require>org.nuxeo.ecm.platform.actions</require>

  <!-- ======= -->
  <!-- Filters  -->
  <!-- ======= -->
  <extension target="org.nuxeo.ecm.platform.actions.ActionService" point="filters">
  
    <!-- Override. Enable common "New" button on workspace roots -->
    <filter id="create">
      <rule grant="true">
        <permission>AddChildren</permission>
        <type>WorkspaceRoot</type>
        <type>SystemTreeRoot</type>
      </rule>
      <rule grant="true">
        <contition>#{document.hasFacet("SoaNode") and document.hasFacet("Folderish")}</contition>
      </rule>
      <rule grant="false">
        <type>Repository</type>
      </rule>
    </filter>
    
  </extension>
  
  <!-- ======= -->
  <!-- Actions  -->
  <!-- ======= -->
  <extension target="org.nuxeo.ecm.platform.actions.ActionService" point="actions">

    <!-- Override. Hide "Create a new workspace" link -->
    <action id="newWorkspace" enabled="false" />
    
    <!-- Redefine content tab to display both listing & properties -->
    <action id="TAB_CONTENT" link="/incl/tabs/easysoa_document_content.xhtml" order="10"
      label="action.view.content" icon="/icons/file.gif">
      <category>VIEW_ACTION_LIST</category>
      <filter-id>isFolderish</filter-id>
    </action>
    
    <!-- Redefine view tab to display parents -->
    <action id="TAB_VIEW" link="/incl/tabs/easysoa_document_view.xhtml" order="0"
      label="action.view.summary" icon="/icons/file.gif">
      <category>VIEW_ACTION_LIST</category>
      <filter-id>view</filter-id>
    </action>
  </extension>
    

</component>
