#parse("banner.html")
#parse("header.html")
#parse("roundedDiv.html")
#set($user = $request.getSession().getAttribute("user"))
#set($client = $clientService.getClient($identifiantClient))
<div id="welcome-title">Bienvenue $user.getLogin()</div>
<div id="rounded-div-content" >
	<div id="friendsView">
		Client details
	
		<p/>
		<form method="POST" action="/pivotal/action/updateClient" id="formUpdateClient">
		    <table id="catalogServices">
				<colgroup> <!-- 1000 -->
			       	<col width="200px">
			       	<col width="200px">
			      	<col width="100px">
			       	<col width="200px">
			       	<col width="200px">
			      	<col width="100px">			      	
		        </colgroup>
			    <tbody>
		            <tr>
		                <td><label for="Identifiant client">Identifiant client :</label></td>
		                <td>$client.getIdentifiantClient()<input type="hidden" name="identifiantClient" value="$client.getIdentifiantClient()"></td>
		                <td></td>
		                <td><label for="Raison sociale">Raison sociale :</label></td>
		                <td><input class="validate[required] text-input" type="text" name="raisonSociale" id="raisonSociale" value="$client.getRaisonSociale()"></td>
		                <td id="raisonSocialeError" class="error"></td>
		            </tr>
		            <tr>
		                <td><label for="Anciennet&eacute;">Anciennet&eacute :</label></td>
		                <td><input class="validate[custom[onlyNumber]] text-input" type="text" name="anciennete" id="anciennete" value="$client.getAnciennete()"></td>
		                <td id="ancienneteError" class="error"></td>
		                <td><label for="Type structure">Type structure :</label></td>
		                <td><input class="validate[] text-input" type="text" name="typeStructure" id="typeStructure" value="$client.getTypeStructure()"></td>
		                <td id="typeStructureError" class="error"></td>		            	
		            </tr>
		            <tr>
		                <td><label for="Num et voie">Num et voie :</label></td>
		                <td><input class="validate[] text-input" type="text" name="numEtVoie" id="numEtVoie" value="$client.getNumEtVoie()"></td>
		                <td id="numEtVoieError" class="error"></td>
		                <td><label for="Email">Email :</label></td>
		                <td><input class="validate[required] text-input" type="text" name="email" id="email" value="$client.getEmail()"></td>
		                <td id="emailError" class="error"></td>
		            </tr>
					<tr>
		                <td><label for="Codepostal">Code postal :</label></td>
		                <td><input class="validate[] text-input" type="text" name="codePostal" id="codePostal" value="$client.getCodePostal()"></td>
		                <td id="codePostalError" class="error"></td>
		                <td><label for="T&eacute;l&eacute;phone">T&eacute;l&eacute;phone :</label></td>
		                <td><input class="validate[] text-input" type="text" name="tel" id="tel" value="$client.getTel()"></td>
		                <td id="telephoneError" class="error"></td>
					</tr>
					<tr>
		                <td><label for="Ville">Ville :</label></td>
		                <td><input class="validate[] text-input" type="text" name="ville" id="ville" value="$client.getVille()"></td>
		                <td id="villeError" class="error"></td>
		                <td><label for="RIB">RIB :</label></td>
		                <td><input class="validate[] text-input" type="text" name="rib" id="rib" value="$client.getRIB()"></td>
		                <td id="ribError" class="error"></td>
					</tr>
					<tr>
		                <td><label for="Pays">Pays :</label></td>
		                <td><input class="validate[] text-input" type="text" name="pays" id="pays" value="$client.getPays()"></td>
		                <td id="paysError" class="error"></td>
		                <td><label for="Forme juridique">Forme juridique :</label></td>
		                <td><input class="validate[] text-input" type="text" name="formeJuridique" id="formeJuridique" value="$client.getFormeJuridique()"></td>
		                <td id="formeJuridiqueError" class="error"></td>
		            </tr>
		            <tr>
		            	<td></td>
		            	<td></td>
		            	<td></td>
		                <td><label for="Siren">Siren :</label></td>
		                <td><input class="validate[required,custom[onlyNumber]] text-input" type="text" name="siren" id="siren" value="$client.getSIREN()"></td>
		                <td id="sirenError" class="error"></td>
		            </tr>
		          	<tr>
		            	<td colspan="3"><input id="cancelCreation" type="button" class="orange button" onclick="cancel()" value="Annuler">
		            	<td colspan="3"><input id="submitUpdate" name="submitUpdate" type="submit" class="orange button" value="Enregistrer"></td>
		          	</tr>
		        </tbody>
		    </table>
		</form>
	
		</p>
		<form method="POST" action="/pivotal/action/creerPrecompte" id="formCreerPrecompte">
		    <table style="margin-left:auto;margin-right:auto;">
				<colgroup>
			       	<col width="500px">
			       	<col width="500px">
		        </colgroup>
		        <tbody>
		            <tr>
						<td colspan="2">
							<input id="submitCreerPrecompte" name="submitCreerPrecompte" type="submit" class="orange button" value="Cr&eacute;er pr&eacute;compte">
							<input type="hidden" name="identifiantClient" value="$client.getIdentifiantClient()">
						</td>
					</tr>
				</tbody>
			</table>
		</form>
	</div>		
		
	<div id="friendsView">

		Informations APV

		<p/>		
	    <table id="catalogServices">
			<colgroup>
		       	<col width="200px">
		       	<col width="500px">
		      	<col width="300px">
	        </colgroup>
		    <tbody>
	            <tr>
	                <td><label for="Ann&eacute;e bilan">Ann&eacute;e bilan :</label></td>
	                <td><label for="Libell&eacute; bilan">Libell&eacute; bilan :</label></td>
	                <td><label for="Nombre">Nombre :</label></td>
	            </tr>
	            #foreach($i in $clientService.getInformationAPV($identifiantClient))
	            <tr>
	                <td>$i.getBilanAnnee()</td>
	                <td>$i.getBilanLibelle()</td>
					<td>$i.getNombre()</td>
	            </tr>
				#end
	        </tbody>
	    </table>		
	</div>
	
	<div id="friendsView">
		Contact client

		<p/>		
	    <table id="catalogServices">
			<colgroup>
		       	<col width="300px">
		       	<col width="300px">
		       	<col width="200px">
		      	<col width="200px">
	        </colgroup>
		    <tbody>
	            <tr>
	                <td><label for="Nom">Nom :</label></td>
	                <td><label for="Pr&eacute;nom">Pr&eacute;nom:</label></td>
	                <td><label for="T&eacute;l&eacute;phone">T&eacute;l&eacute;phone :</label></td>
	                <td><label for="Email">Email :</label></td>
	            </tr>
	            #foreach($c in $clientService.getContactClient($identifiantClient))
	            <tr>
	                <td>$c.getNomContact()</td>
	                <td>$c.getPrenomContact()</td>
					<td>$c.getTelephone()</td>
					<td>$c.getEmail()</td>
	            </tr>
				#end
	        </tbody>
	    </table>		
		
    </div>
</div>

<script type="text/javascript">

	function cancel(){
		if(confirm('Are you sure ?')){ 
			window.location='/pivotal/clients.html';
		}
	}
</script>

#parse("footpage.html")